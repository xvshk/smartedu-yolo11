# 机器学习模块删除需求文档

## 介绍

本文档定义了删除系统中前后端机器学习功能以及相关数据库组件的需求，但保留MLflow追踪功能。此删除操作旨在简化系统架构，专注于核心的行为检测功能，同时保持模型实验追踪能力。

## 术语表

- **ML模块**: 前后端机器学习相关的代码和功能（不包括MLflow）
- **MLflow**: 机器学习实验追踪和模型管理平台（保留）
- **ML数据库表**: 存储机器学习相关数据的数据库表（删除）
- **核心检测**: 基于YOLO的实时行为检测功能（保留）

## 需求

### 需求 1: 删除后端ML API模块

**用户故事**: 作为系统管理员，我希望删除所有机器学习API接口，以简化系统架构并减少维护成本。

#### 验收标准

1. WHEN 访问任何ML相关API接口 THEN 系统应返回404错误
2. WHEN 系统启动时 THEN 不应加载任何ML相关的蓝图或路由
3. WHEN 检查API文档 THEN 不应包含任何ML相关的接口说明
4. THE 系统应移除 `backend/api/ml.py` 文件
5. THE 系统应从主应用中移除ML蓝图注册

### 需求 2: 删除ML服务层组件

**用户故事**: 作为开发人员，我希望删除所有ML服务层代码，以减少代码复杂度和依赖关系。

#### 验收标准

1. THE 系统应删除 `backend/services/ml_engine.py` 文件
2. THE 系统应删除 `backend/ml/` 目录及其所有内容
3. WHEN 系统运行时 THEN 不应尝试初始化任何ML引擎或服务
4. THE 系统应移除所有ML相关的Python依赖包
5. WHEN 其他服务需要ML功能时 THEN 应优雅地处理缺失的ML组件

### 需求 3: 保留MLflow追踪功能

**用户故事**: 作为数据科学家，我希望保留MLflow追踪功能，以便继续进行模型实验和性能监控。

#### 验收标准

1. THE 系统应保留 `backend/ml/mlflow_tracker.py` 文件
2. THE 系统应保留 `runs/mlflow/` 目录及其内容
3. WHEN 需要时 THEN MLflow服务器应能正常启动和访问
4. THE 系统应保留MLflow相关的配置文件
5. THE 系统应在requirements.txt中保留mlflow依赖

### 需求 4: 删除ML相关数据库表

**用户故事**: 作为数据库管理员，我希望删除所有ML相关的数据库表，以清理数据库结构并释放存储空间。

#### 验收标准

1. THE 系统应删除 `ml_models` 表（如果存在）
2. THE 系统应删除 `ml_experiments` 表（如果存在）
3. THE 系统应删除 `ml_runs` 表（如果存在）
4. THE 系统应删除 `model_predictions` 表（如果存在）
5. WHEN 执行数据库迁移后 THEN 数据库应不包含任何ML相关表

### 需求 5: 删除前端ML界面

**用户故事**: 作为用户，我希望前端界面不再显示任何机器学习相关的功能，以避免混淆和误操作。

#### 验收标准

1. THE 系统应删除 `frontend/src/views/MLDashboard.vue` 文件
2. WHEN 访问ML相关路由时 THEN 应重定向到主页面或显示404
3. THE 系统应从导航菜单中移除ML相关选项
4. THE 系统应从前端API模块中移除所有ML相关方法
5. WHEN 用户浏览系统时 THEN 不应看到任何ML功能的入口

### 需求 6: 调整ML相关依赖

**用户故事**: 作为开发人员，我希望只移除不需要的ML依赖项，保留MLflow相关的包。

#### 验收标准

1. THE 系统应从 `requirements.txt` 中移除scikit-learn等ML训练依赖
2. THE 系统应保留 `requirements.txt` 中的mlflow依赖
3. THE 系统应保留MLflow相关的环境变量配置
4. THE 系统应保留MLflow相关的Docker配置（如果有）
5. WHEN 系统部署时 THEN 应保留MLflow功能可用

### 需求 7: 更新系统文档

**用户故事**: 作为文档维护者，我希望更新相关文档，反映前后端ML功能的移除，但保留MLflow说明。

#### 验收标准

1. THE 系统应更新README文件，移除前后端ML功能说明，保留MLflow说明
2. THE 系统应更新API文档，移除ML接口说明
3. THE 系统应更新架构图，移除前后端ML组件，保留MLflow组件
4. THE 系统应更新用户手册，移除ML使用指南，保留MLflow使用说明
5. WHEN 新用户查看文档时 THEN 应了解MLflow仍可用于模型追踪

### 需求 8: 保持核心功能完整

**用户故事**: 作为用户，我希望在删除ML功能后，核心的行为检测功能仍然完全正常工作。

#### 验收标准

1. WHEN 上传图片进行检测时 THEN 系统应正常返回检测结果
2. WHEN 上传视频进行检测时 THEN 系统应正常处理并返回结果
3. WHEN 查看检测历史时 THEN 系统应正常显示历史记录
4. THE 预警功能应继续正常工作
5. THE 学生画像功能应继续正常工作（基于检测数据）

### 需求 9: 数据迁移和备份

**用户故事**: 作为数据管理员，我希望在删除ML功能前，能够备份相关数据以防将来需要。

#### 验收标准

1. WHEN 执行删除操作前 THEN 系统应创建ML相关数据的备份
2. THE 系统应提供数据导出脚本
3. WHEN 删除ML表时 THEN 应先确认没有其他表依赖这些数据
4. THE 系统应记录删除操作的日志
5. WHEN 删除完成后 THEN 应提供回滚方案（如果需要）

### 需求 10: 系统测试和验证

**用户故事**: 作为质量保证人员，我希望验证ML功能删除后系统的稳定性和完整性。

#### 验收标准

1. WHEN ML功能删除后 THEN 所有核心功能应通过回归测试
2. WHEN 系统启动时 THEN 不应出现ML相关的错误日志
3. WHEN 运行系统健康检查时 THEN 所有检查项应通过
4. THE 系统性能应保持或改善（由于减少了ML组件）
5. WHEN 用户正常使用系统时 THEN 不应遇到任何功能缺失的问题